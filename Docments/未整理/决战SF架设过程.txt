安装架设详细说明： 

 

1、在SQL SERVER 2000中建立数据库Drgame和Droiyan，并进行二个文件的数据还原！并在这二个数据库中的每一项的用户全部删除只保留dbo！

 


2、在SQL SERVER 2000中的安全性中的登陆项目中建立二个用户：第一个用户为：drgame；密码：drgame；在数据库指向中指向drgame数据库，并在数据库角色允许中选择PUBLIC和DB_OWNER。第二个用户：droiyan；密码：droiyan；在数据库指向中指向droiyan数据库，并在数据库角色允许中选择PUBLIC和DB_OWNER。  

 

3、建立五个ODBC数据源分别指向二个数据库，分别为DR_Session数据源指向Droiyan数据库，建立Dradmin数据源指向drgame数据库，建立Drgame数据源指向drgame数据库,建立Drgamenew数据源指向drgame数据库，建立Droiyan数据源指向droiyan数据库。

 


4、打开SQL SERVER企业管理器中数据库drgame修改serverinfo表中的IP修改为自己的外网IP，以及droiyan库中存储过程中的Update_CURRENTUSER_CIS文件，双击打开把里面的IP改成您的外网IP。

 

5、打开帝王决战服务器端文件把其中所有的INI文件全部IP修改成您的外网IP！ 

 


6、利用自带工具SRVINSTW.EXE程序文件对Starter.exe文件进行注册成系统文件，方法如下：双击SRVINSTW.EXE程序文件选择INSTALL A SERVICE点击下一步，选择LOCAL MACHINE点击下一步，在SERVICE NAME中添写Starter点击下一步，点击浏览，选择程序Starter.exe文件所在的目录(在你决战服务器端下面)点击下一步，选择SERVICE IS ITS OWN PROCESS点击下一步，选择SYSTEM ACCOUNT（在这其中有一个ALLOW SERVICE TO INTERACT WITH DESKTOP前面的一个框不用选择）点击下一步，选择AUTOMATIC点击下一步后，点击完成！ 

 

7、从控制面板中的管理工具项目中的服务项目中找到刚才建立的Starter项必手动启动他（在他上面点击右键就可以看到启动项了）！

 

8、进入咱们帝王决战的目录下面双击ServiceManager.exe程序(这个是中文的好懂，如果您对英文懂的话就用下面的一个，哈，俺是不懂所以先用中文的好了！)双击后选择“档案”中的“开启”，选择在服务器端下面的“NEW.SMC”选择“打开”，这时伺服器中就显示了刚才我们加入的“SERVER”服务器，这时我们按键盘的“F2”，调出“LOG IN”窗口，输入“管理者ID和密码”全为：“DROIYAN”，点击“确定”，这时伺服器中的“SERVER”服务器由红色变为绿色，这时咱们添加咱们的IP（外网）应该选择第二个菜单栏中的“伺服器添加”，名字就输入您想起的名字我们就定SERVER吧，其中也有一个SERVER到时您利用伺服菜单栏中的“伺服器删除”把原来的删除保留你自己的就行了，IP添上你自己的IP地址后点“追加”，在选定您刚才添加上的IP地址后，点一下“代表地址指定”后在点击“确定”完成添加！  

 

9、选择“服务”菜单栏中的“服务器设定”，首先我们先对版本管理者进行添加这里只添二项，安装路径和来源路径分别添写您的决战服务器端的目录即可，记得在添写来源路径时最后加个\，假定我们决战服务器端存放在D:\Jzserver，那么在安装路径中添写：D:\Jzserver，在来源路径中添写D:\Jzserver\ 

 

10、进行第二项游戏服务的设置，点击追加“伺服器ID”添写0，源文件已经是0不用动，第二项“服务名字”添写“dir”，“执行档案名字”中添写决战所在目录中的“Dir.exe”文件所存在位置，按上面的例子我们应该添写“D:\Jzserver\dir.exe”,安装伺服器名字和IP不用动了已经是我们的名称和IP地址了，下面是“端口”添写“9001”，“人员限制”添写“5000”或更高随您了然后点击确定,这时有可能显示不出来，您只要点击“最新情报观看”就能显示了，然后点击您刚才添加的“GM”服务点击“指定基本伺服器”完成游戏服务设置！ 

 


11、使用者管理者：这一项中的连线限制改成您刚才设定的人数，刚才我们设定了5000，这里也要添写5000，安装路径添写D:\Jzserver就是您自己的帝王决战目录! 

 


12、SEssion服务中点击追加，添写伺服ID这里本身就是0不用添写，服务名字添写“SESSION”，执行路径为您安装决战目录，PORT端口添写：23，人员：（上线人员）随便你自己输入，我们设置：“2000”后选择”免费服务“后点击确定！点击最下面的确定完成这一大项的设置，到这里基本就全完成了设置，不过还有几个地方要修改，我们接着说！ 

 

13、现在启动ServiceManager.exe各项启动全为绿色表示启动成功，点开一项点击菜单下面的“向右”的键头就OK！我就不用教你如何启动了吧！ 

 

14、启动以上的所有项目全为绿色后我们在启动目录下面的其他程序，第一个为：Agent.exe，第二个为：BridgeServer.exe，第三个为：CharInfoServer_fix.exe，这个文件要用UE打开把里面的IP替换为我们自己的，方法为：打开这个文件后查找IP：10.46，就有一个替换为我们的IP就OK了，第四个为：DRSQLAgent.exe，第五个为：Server.exe，这个文件点击后会很慢才会出现，稍等一会吧，不过要看您的机器性能了，哈哈! 

 

15、有可能的问题: 
session的这些相关服务如果在机子重新启动后，再打开servicemanager这些服务有可能不存在了。那么可以有两种选择，一个是重新设置添加一次所有session相关的这几个服务。当然安装过程中如果提示该服务已存在，那么就要用SRVINSTW工具把这些服务删除掉，然后重新安装一次。 

 


16、这时服务器端就运行好了，下面来调整帝王的网页注册系统，其中就改一样东西就OK，就是CONN.ASP文件，把其中的IP以及用户和密码改成您自己的，就OK了！

 


17、OK，到这里您就进入游戏，爽吧！  
下面就是帝王的GM命令，100%可以！！！ 
/w 查看在线人数 
/forcequit 名字 踢玩家下线 ]
/双倍经验 开启或者关闭双倍经验 
/traceuser 名字 抓玩家到自己身边  
/tracenpc 名字 抓NPC到自己身边 
/announce 要说的话 
/forceallquit T所有人下线 )
召唤BOSS 
/mopcall 名字 x坐标 y坐标 
例如：/mopcall 武神 
能假设到帝王的人可以试一下！ 
  
增加1个，但要完善到3.5才能用 
/p  显示效果（帝王的初始化是GM隐身的，GM出的魔法和加的辅助魔法都是没显示动画效果的）  
用这个命令就可以了
一按/P 1就显示，2就关闭 

 

13、决战私服登陆游戏显示人满的解决方法!
我登陆一进分区 就显示人满,本机测试. 以下是我办法 都用过,不知还有没有人知道这是为什么 帝王的服务端 剩下的和录象做的完全一样 1：SQL SERVER企业管理器中数据库drgame修改serverinfo表中的IP修改IP。2：数据库droiyan修改SERVER_IP表中的IP修改IP。3：以及droiyan库中存储过程中的UPDATE_CURRENTUSER_CIS文件把里面的IP改IP。 4:服务端里的dir.ini里的9000改成13277，把伺服器里DIR的服务pot改成13000。或服务端里的dir.ini里的9000改成13000，把伺服器里DIR的服务pot改成9001。  
 

 

14、手动注册和人物属性修改
手动注册在droiyan数据库里的NGSCUSER表里很简单 只需要填写第1个和第2个(为 ID和密码)如果想可以删除人物的话 )就要把身份证写上去.人物属性在drgame数据库GameUser里.第一个是人物名字. 后面都是属性(不要修改的太厉害,不然会变成负的) sSkillpoint是技能点 sSp是战斗数量 iDN是钱tisOP是GM(1和0) 这个表格基本控制了人物的属性. 修改暴率和经验也很简单.

 

PS:目前服务器端的基本问题都搞定不困难.(以2.0为止) 大家有时间多看脚本,会有点突破.
